<!DOCTYPE html><html lang="zh-CN"><head><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description" content="个人的技术分享和生活点滴记录"><meta name="keywords" content="Rearib"><title>django-Web框架本质探究 | Rearib的个人博客</title><link rel="stylesheet" type="text/css" href="//fonts.neworld.org/css?family=Source+Code+Pro"><link rel="stylesheet" type="text/css" href="/css/style.css?v=2.0.1"><link rel="stylesheet" type="text/css" href="/css/highlight.css?v=2.0.1"><link rel="Shortcut Icon" href="/favicon.ico"><link rel="bookmark" href="/favicon.ico"><link rel="apple-touch-icon" href="/apple-touch-icon.png"><link rel="apple-touch-icon-precomposed" href="/apple-touch-icon.png"><link rel="alternate" type="application/atom+xml" href="/atom.xml"></head><body><div class="body_container"><div id="header"><div class="site-name"><h1 class="hidden">django-Web框架本质探究</h1><a id="logo" href="/.">Rearib的个人博客</a><p class="description">一生温暖纯良，不舍爱与自由</p></div><div id="nav-menu"><a href="/." class="current"><i class="fa fa-home"> 首页</i></a><a href="/archives/"><i class="fa fa-archive"> 归档</i></a><a href="/about/"><i class="fa fa-user"> 关于</i></a><a href="/atom.xml"><i class="fa fa-rss"> 订阅</i></a></div><div id="search-form"><div id="result-mask" class="hide"></div><label><input id="search-key" type="text" autocomplete="off" placeholder="Arama"></label><div id="result-wrap" class="hide"><div id="search-result"></div></div><div class="hide"><template id="search-tpl"><div class="item"><a href="/{path}" title="{title}"><div class="title">{title}</div><div class="time">{date}</div><div class="tags">{tags}</div></a></div></template></div></div></div><div id="layout" class="layout-g"><div class="layout-l"><div class="content_container"><div class="post"><h1 class="post-title">django-Web框架本质探究</h1><div class="post-meta"><a href="/2018/09/01/django-基础介绍/#comments" class="comment-count"></a><p><span class="date">Sep 01, 2018</span><span><i id="busuanzi_container_page_pv"><i id="busuanzi_value_page_pv"></i><i>点击</i></i></span></p></div><div class="post-content"><h2 id="Web框架本质"><a href="#Web框架本质" class="headerlink" title="Web框架本质"></a>Web框架本质</h2><p>&emsp;&emsp;对于所有的Web应用，本质上其实就是一个socket服务端，用户的浏览器其实就是一个socket客户端。对于真实开发中的python web程序来说，一般会分为两部分：<strong>服务器程序</strong>和<strong>应用程序</strong>。服务器程序负责对socket服务器进行封装，并在请求到来时，对请求的各种数据进行整理。应用程序则负责具体的逻辑处理。<br><a id="more"></a><br>&emsp;&emsp;为了方便应用程序的开发,就会出现许多的Web框架,而所有的web框架都需要与服务器程序配合才能为用户服务，所以web框架和web服务器之间需要标准化。</p>
<h3 id="WSGI-uwsgi-uWSGI区别"><a href="#WSGI-uwsgi-uWSGI区别" class="headerlink" title="WSGI-uwsgi-uWSGI区别"></a>WSGI-uwsgi-uWSGI区别</h3><p>&emsp;&emsp;<strong>WSGI</strong>：全称是Web Server Gateway Interface，WSGI不是服务器、python模块、框架、API或者任何软件，只是一种<strong>网关接口</strong>，它是一个Web服务器（如nginx，uWSGI等服务器）与web应用（如用Django框架写的程序）通信的一种规范。<br>&emsp;&emsp;<strong>uwsgi</strong>：一种传输协议，常用于在uWSGI服务器与其他网络服务器的数据通信。<br>&emsp;&emsp;<strong>uWSGI</strong>：是一个web服务器，实现了WSGI协议、uwsgi协议、http协议等。<br><img src="http://qiniu.rearib.top/20181830/0933-9.png" alt=""><br><strong>工作流程:</strong></p>
<ol>
<li>首先客户端请求服务资源。</li>
<li>nginx作为直接对外的服务接口,接收到客户端发送过来的http请求,会解包、分析。</li>
</ol>
<ul>
<li>如果是静态文件请求就根据nginx配置的静态文件目录，返回请求的资源。</li>
<li>如果是动态的请求,nginx就通过配置文件,将请求传递给uWSGI。</li>
</ul>
<ol>
<li>uWSGI将接收到的包进行处理，转发给wsgi。</li>
<li>wsgi根据请求调用django工程的某个文件或函数，处理完后django将返回值交给wsgi。</li>
<li>wsgi将返回值进行打包，转发给uWSGI。</li>
<li>uWSGI接收后转发给nginx,nginx最终将返回值返回给客户端(如浏览器)。</li>
</ol>
<p>&emsp;&emsp;第一级的nginx并不是必须的，uwsgi完全可以完成整个的和浏览器交互的流程，但是要考虑到某些情况：</p>
<ul>
<li>安全问题：程序不能直接被浏览器访问到，而是通过nginx。nginx只开放某个接口，这样运维人员在nginx上加上安全性的限制，可以达到保护程序的作用。</li>
<li>负载均衡问题：一个uwsgi很可能不够用，有了nginx做代理，一个nginx可以代理多台uwsgi完成uwsgi的负载均衡。</li>
<li>静态文件问题：用django或是uwsgi这种东西来负责静态文件的处理是很浪费的行为，而且他们本身对文件的处理也不如nginx好，所以整个静态文件的处理都直接由nginx完成，静态文件的访问完全不去经过uwsgi以及其后面的东西。</li>
</ul>
<h3 id="通过对Django的启动研究socket的启动"><a href="#通过对Django的启动研究socket的启动" class="headerlink" title="通过对Django的启动研究socket的启动"></a>通过对Django的启动研究socket的启动</h3><p>&emsp;&emsp;<strong>使用runserver是启动Django自带的WSGI服务器</strong>，常用于开发调试，分析Django的源码:</p>
<ul>
<li>执行<code>python manage.py runserver 127.0.0.1:8000</code>后，会在<code>\Django1.11.6\Lib\site-packages\django\core\management\__init__.py</code>中执行<code>self.fetch_command(subcommand).run_from_argv(self.argv)</code>。</li>
<li>调用<code>fetch_command</code>返回的<code>runserver</code>模块下的<code>Command</code>对象，其中Command对象是<code>&lt;django.contrib.staticfiles.management.commands.runserver.Command object</code>，继续调用<code>Command</code>对象的<code>run_from_argv</code>方法，然后执行<code>self.handle(*args, **options)</code>调用<code>Command</code>下的<code>handle</code>。</li>
<li><p>从<code>Command.handle</code>–&gt;<code>Command.run</code>–&gt;<code>Command.inner_run</code>，并在inner_run中执行：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">handler = self.get_handler(*args, **options)</span><br><span class="line">run(self.addr, int(self.port), handler,</span><br><span class="line">    ipv6=self.use_ipv6, threading=threading, server_cls=self.server_cls)</span><br></pre></td></tr></table></figure>
</li>
<li><p>在<code>get_handler</code>中会在通过<code>wsgi.py</code>返回<code>WSGIHandler()</code>，继承于<code>class WSGIHandler(base.BaseHandler)</code>，然后会执行run:</p>
</li>
<li><p>而run就是启动一个线程一直监听，其中<code>wsgi_handler</code>是<code>WSGIHandler()</code>，<code>server_cls=WSGIServer</code>是继承于<code>class WSGIServer(simple_server.WSGIServer, object)</code>，而<code>simple_server</code>来自于<code>from wsgiref import simple_server</code>，而wsgiref就是Python内置的一个WSGI服务器。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">def run(addr, port, wsgi_handler, ipv6=False, threading=False, server_cls=WSGIServer):</span><br><span class="line">    server_address = (addr, port)</span><br><span class="line">    if threading:</span><br><span class="line">        httpd_cls = type(str(&apos;WSGIServer&apos;), (socketserver.ThreadingMixIn, server_cls), &#123;&#125;)</span><br><span class="line">    else:</span><br><span class="line">        httpd_cls = server_cls</span><br><span class="line">    httpd = httpd_cls(server_address, WSGIRequestHandler, ipv6=ipv6)</span><br><span class="line">    if threading:</span><br><span class="line">        # ThreadingMixIn.daemon_threads indicates how threads will behave on an</span><br><span class="line">        # abrupt shutdown; like quitting the server by the user or restarting</span><br><span class="line">        # by the auto-reloader. True means the server will not wait for thread</span><br><span class="line">        # termination before it quits. This will make auto-reloader faster</span><br><span class="line">        # and will prevent the need to kill the server manually if a thread</span><br><span class="line">        # isn&apos;t terminating correctly.</span><br><span class="line">        httpd.daemon_threads = True</span><br><span class="line">    httpd.set_app(wsgi_handler)</span><br><span class="line">    httpd.serve_forever()</span><br></pre></td></tr></table></figure>
</li>
<li><p>wsgiref是用纯Python编写的WSGI服务器的参考实现。所谓“参考实现”是指该实现完全符合WSGI标准，但是不考虑任何运行效率，仅供开发和测试使用。</p>
</li>
</ul>
<p>参考文章:</p>
<ul>
<li><a href="https://www.cnblogs.com/luchuangao/articles/7374415.html" target="_blank" rel="noopener">由django.setup()引发得对Django启动过程解读</a></li>
<li><a href="http://www.javabin.cn/2018/django_start.html" target="_blank" rel="noopener">Django 源码学习之搭建环境和django启动流程(一)</a></li>
</ul>
<h2 id="Django梳理与难点剖析"><a href="#Django梳理与难点剖析" class="headerlink" title="Django梳理与难点剖析"></a>Django梳理与难点剖析</h2><h3 id="django-model"><a href="#django-model" class="headerlink" title="django model"></a>django model</h3><blockquote>
<p>字段选项和字段类型 <a href="https://yiyibooks.cn/xx/Django_1.11.6/ref/models/fields.html" target="_blank" rel="noopener">官方文档</a></p>
</blockquote>
<p>&emsp;&emsp;如果null为True，Django将在数据库中将空值存储为NUL，blank=True，表单验证时将允许输入空值，null 纯粹是数据库范畴的概念，而blank 是数据验证范畴的。<br>&emsp;&emsp;数据库中用来表示该字段的列名称。 如果未指定，那么Django将会使用字段名作为列名。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">id = models.AutoField(max_length=11,db_column=&apos;UID&apos;,primary_key=True)</span><br></pre></td></tr></table></figure></p>
<p>&emsp;&emsp;如果你有一个title 字段设置unique_for_date=”pub_date”，那么Django 将不允许两个记录具有相同的title 和pub_date。unique_for_month类似unique_for_date，只是要求字段对于月份是唯一的。<br>&emsp;&emsp; FileField.upload_to该属性提供设置上传目录和文件名的方式。<br>&emsp;&emsp;在choices中，每个元组中的第一个元素，是存储在数据库中的值；第二个元素是使人容易理解的描述。给定一个模型实例，可以使用get_FOO_display()方法来访问选项字段的显示值。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">YEAR_IN_SCHOOL_CHOICES = (</span><br><span class="line">    (&apos;FR&apos;, &apos;Freshman&apos;),</span><br><span class="line">    (&apos;SO&apos;, &apos;Sophomore&apos;),</span><br><span class="line">    (&apos;JR&apos;, &apos;Junior&apos;),</span><br><span class="line">    (&apos;SR&apos;, &apos;Senior&apos;),</span><br><span class="line">)</span><br></pre></td></tr></table></figure></p>
<blockquote>
<p>关联关系字段</p>
</blockquote>
<p> &emsp;&emsp;ForeignKey.on_delete：当删除由ForeignKey引用的对象时，Django将模拟由on_delete参数指定的SQL约束的行为。<br> &emsp;&emsp;ManyToMany时会自动创建第三张表用于管理多对多关系，如果想在第三张表添加额外字段，可以使用through。<a href="http://www.cnblogs.com/linyuhong/p/9640078.html" target="_blank" rel="noopener">参考链接</a><br>&emsp;&emsp;当中间模型具有多个外键指向多对多关联关系模型中的任何一个（或两个），你必须指定through_fields。<a href="https://yiyibooks.cn/__trs__/xx/Django_1.11.6/ref/models/fields.html#manytomanyfield" target="_blank" rel="noopener">官方文档</a><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">from django.db import models</span><br><span class="line"></span><br><span class="line">class Person(models.Model):</span><br><span class="line">    name = models.CharField(max_length=50)</span><br><span class="line"></span><br><span class="line">class Group(models.Model):</span><br><span class="line">    name = models.CharField(max_length=128)</span><br><span class="line">    members = models.ManyToManyField(</span><br><span class="line">        Person,</span><br><span class="line">        through=&apos;Membership&apos;,</span><br><span class="line">        through_fields=(&apos;group&apos;, &apos;person&apos;),</span><br><span class="line">    )</span><br><span class="line"></span><br><span class="line">class Membership(models.Model):</span><br><span class="line">    group = models.ForeignKey(Group, on_delete=models.CASCADE)</span><br><span class="line">    person = models.ForeignKey(Person, on_delete=models.CASCADE)</span><br><span class="line">    //邀请者</span><br><span class="line">    inviter = models.ForeignKey(</span><br><span class="line">        Person,</span><br><span class="line">        on_delete=models.CASCADE,</span><br><span class="line">        related_name=&quot;membership_invites&quot;,</span><br><span class="line">    )</span><br><span class="line">    invite_reason = models.CharField(max_length=64)</span><br></pre></td></tr></table></figure></p>
<p>&emsp;&emsp;Membership有两个 foreign keys指向 Person (person and inviter), 这样会导致关系不清晰，Django不知道使用哪一个外键。 在这种情况下，你必须使用through_fields 明确指定Django 应该使用哪些外键，就像上面例子一样。<br>&emsp;&emsp;through_fields 接受一个2元数组 (‘field1’, ‘field2’), 其中 field1是指向定义了ManyToManyField的那个model的 foreign key的名字(在本例中就是group，它自己定义了M2M字段，同时也在中间模型中被ForeignKey所指向 ), and field2就是目标模型的foreign key 的名字 (person in this case).<br>&emsp;&emsp;当中间模型具有多个外键指向多对多关联关系模型中的任何一个（或两个），你必须 指定through_fields。 这通用适用于recursive relationships，当用到中间模型而有多个外键指向该模型时，或当你想显式指定Django 应该用到的两个字段时。<br>&emsp;&emsp;递归的关联关系使用的中间模型始终定义为非对称的，也就是symmetrical=False —— 所以具有源和目标的概念。 这种情况下，’field1’ 将作为管理关系的源，而’field2’ 作为目标。</p>
<blockquote>
<p>related_name和related_query_name的使用 <a href="https://yiyibooks.cn/xx/Django_1.11.6/topics/db/models.html#abstract-related-name" target="_blank" rel="noopener">官方文档</a></p>
</blockquote>
<blockquote>
<p>模型的Meta选项 <a href="https://yiyibooks.cn/xx/Django_1.11.6/ref/models/options.html" target="_blank" rel="noopener">官方文档</a></p>
</blockquote>
<ul>
<li>abstract = True， 就表示模型是抽象基类</li>
<li>verbose_name = “pizza”,  对象的一个易于理解的名称</li>
<li>unique_together = (“driver”, “restaurant”), 用来设置的不重复的字段组合,当unique_together的约束被违反时，模型校验期间会抛出ValidationError异常。</li>
<li>ordering = [‘-order_date’]  对象默认的顺序</li>
</ul>
<blockquote>
<p>model的Manager示例</p>
</blockquote>
<p>&emsp;&emsp;每个非抽象的Model 类必须给自己添加一个Manager实例。 Django 确保在你的模型类中至少有一个默认的Manager。 如果你没有添加自己的管理器，Django将添加一个属性objects。</p>
<blockquote>
<p>验证对象 <a href="https://yiyibooks.cn/xx/Django_1.11.6/ref/models/instances.html#validating-objects" target="_blank" rel="noopener">官方文档</a></p>
</blockquote>
<p>&emsp;&emsp;验证一个模型涉及三个步骤：</p>
<ul>
<li>验证模型的字段 —— Model.clean_fields()</li>
<li>验证模型的完整性 —— Model.clean()</li>
<li>验证模型的唯一性 —— Model.validate_unique()</li>
</ul>
<p>&emsp;&emsp;当你调用模型的full_clean() 方法时，这三个方法都将执行。</p>
<blockquote>
<p>信号</p>
</blockquote>
<ol>
<li>发出预先保存的信号。 发送pre_save信号，允许监听该信号的任何函数执行某些操作。</li>
<li>预处理数据。 调用每个字段的pre_save()方法来执行所需的任何自动数据修改。 例如，日期/时间字段覆盖pre_save()来实现auto_now_add和auto_now。</li>
<li>准备数据库的数据。 要求每个字段的get_db_prep_save()方法将其当前值提供给可写入数据库的数据类型。大多数字段不需要数据准备。 简单的数据类型，例如整数和字符串，是可以直接写入的Python 对象。 但是，复杂的数据类型通常需要一些改动。例如，DateField 字段使用Python 的 datetime 对象来保存数据。 数据库保存的不是datetime 对象，所以该字段的值必须转换成ISO兼容的日期字符串才能插入到数据库中。</li>
<li>将数据插入数据库。 预处理的准备数据组成一个用于插入数据库的SQL语句。</li>
<li>发出一个保存后的信号。 发送post_save信号，允许监听该信号的任何函数执行某些操作。</li>
</ol>
<blockquote>
<p>现有字段更新</p>
</blockquote>
<p>&emsp;&emsp;有时候你需要在一个字段上执行简单的算法操作，例如增加或者减少当前值。 实现这点的简单方法是像下面这样：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt;&gt; product = Product.objects.get(name=&apos;Venezuelan Beaver Cheese&apos;)</span><br><span class="line">&gt;&gt;&gt; product.number_sold += 1</span><br><span class="line">&gt;&gt;&gt; product.save()</span><br></pre></td></tr></table></figure></p>
<p>&emsp;&emsp;如果从数据库中读取的旧的number_sold 值为10，那么写回到数据库中的值将为11。<br>&emsp;&emsp;通过将更新基于原始字段的值而不是显式赋予一个新值，这个过程可以避免竞态条件而且更快。 Django提供F表达式用于这种类型的相对更新。 利用F表达式，前面的示例可以表示成：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt;&gt; from django.db.models import F</span><br><span class="line">&gt;&gt;&gt; product = Product.objects.get(name=&apos;Venezuelan Beaver Cheese&apos;)</span><br><span class="line">&gt;&gt;&gt; product.number_sold = F(&apos;number_sold&apos;) + 1</span><br><span class="line">&gt;&gt;&gt; product.save()</span><br></pre></td></tr></table></figure></p>
<blockquote>
<p>指定要保存的字段</p>
</blockquote>
<p>&emsp;&emsp;如果传递给save() 的update_fields 关键字参数一个字段名称列表，那么将只有该列表中的字段会被更新。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">product.name = &apos;Name changed again&apos;</span><br><span class="line">product.save(update_fields=[&apos;name&apos;])</span><br></pre></td></tr></table></figure></p>
<blockquote>
<p>实例方法</p>
</blockquote>
<ul>
<li>__str__() 方法返回模型的一个友好的、人类可读的形式。</li>
<li>get_absolute_url() 方法告诉Django 如何计算对象的标准URL。</li>
<li>get_FOO_display():对于每个具有choices 的字段，每个对象将具有一个get_FOO_display() 方法，其中FOO 为该字段的名称。 这个方法返回该字段对“人类可读”的值。</li>
</ul>
<blockquote>
<p>QuerySet</p>
</blockquote>
<ul>
<li>QuerySet何时求值<a href="https://yiyibooks.cn/__trs__/xx/Django_1.11.6/ref/models/querysets.html#when-querysets-are-evaluated" target="_blank" rel="noopener">官方文档</a></li>
<li>返回新的QuerySet的方法<a href="https://yiyibooks.cn/__trs__/xx/Django_1.11.6/ref/models/querysets.html#methods-that-return-new-querysets" target="_blank" rel="noopener">官方文档</a></li>
<li>不返回QuerySet的方法<a href="https://yiyibooks.cn/__trs__/xx/Django_1.11.6/ref/models/querysets.html#methods-that-do-not-return-querysets" target="_blank" rel="noopener">官方文档</a></li>
</ul>
<p>&emsp;&emsp;如果你需要知道是否存在至少一条记录（而不需要真实的对象），使用 exists() 将更加高效。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">看到(https://yiyibooks.cn/xx/Django_1.11.6/ref/models/instances.html)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">_set</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">抽象模型(https://yiyibooks.cn/xx/Django_1.11.6/topics/db/models.html#yiyi-997)</span><br><span class="line"></span><br><span class="line">ORM的F&amp;Q</span><br><span class="line"></span><br><span class="line">数据库基本操作  _ __ 连表操作</span><br><span class="line"></span><br><span class="line">某几个字段和参数</span><br><span class="line"></span><br><span class="line">request.path_info获取当前客户端访问的路劲</span><br><span class="line"></span><br><span class="line">django的路由和reverse</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">favor_list = request.POST.getlist(&quot;favor&quot;)      #getlist获取多个值</span><br><span class="line">pwd = request.POST.get(&apos;pwd&apos;, None)</span><br><span class="line"></span><br><span class="line">return redirect(&apos;http://www.baidu.com&apos;)</span><br><span class="line"></span><br><span class="line">配置静态文件static路径</span><br><span class="line"></span><br><span class="line">静态文件static里面是存放css和js文件的，要想显示相应的样式，必须先修改settings文件配置</span><br><span class="line"></span><br><span class="line"># settings.py文件里增加下面内容</span><br><span class="line">STATIC_URL = &apos;/static/&apos;</span><br><span class="line">STATICFILES_DIRS = (</span><br><span class="line">    os.path.join(BASE_DIR, &apos;static&apos;),</span><br><span class="line">)</span><br></pre></td></tr></table></figure>
</div><div class="tags"><a href="/tags/django/">django</a></div><div class="post-share"><div class="bdsharebuttonbox"><span style="float:left;line-height: 28px;height: 28px;font-size:16px;font-weight:blod">分享到：</span><a href="#" data-cmd="more" class="bds_more"></a><a href="#" data-cmd="mshare" title="分享到一键分享" class="bds_mshare"></a><a href="#" data-cmd="fbook" title="分享到Facebook" class="bds_fbook"></a><a href="#" data-cmd="twi" title="分享到Twitter" class="bds_twi"></a><a href="#" data-cmd="linkedin" title="分享到linkedin" class="bds_linkedin"></a><a href="#" data-cmd="youdao" title="分享到有道云笔记" class="bds_youdao"></a><a href="#" data-cmd="evernotecn" title="分享到印象笔记" class="bds_evernotecn"></a><a href="#" data-cmd="weixin" title="分享到微信" class="bds_weixin"></a><a href="#" data-cmd="qzone" title="分享到QQ空间" class="bds_qzone"></a><a href="#" data-cmd="tsina" title="分享到新浪微博" class="bds_tsina"></a></div></div><div class="post-nav"><a href="/2018/09/02/django-FBV&amp;CBV/" class="pre">django-FBV&amp;CBV</a><a href="/2018/09/01/django-编辑器Markdown的使用/" class="next">django-编辑器Markdown的使用</a></div><div id="comments"></div></div></div></div><div class="layout-r"><div id="sidebar"><div class="search-pla"></div><div id="toc" class="widget"><div class="widget-title"><i class="fa fa-fei">文章目录</i></div><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#Web框架本质"><span class="toc-text">Web框架本质</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#WSGI-uwsgi-uWSGI区别"><span class="toc-text">WSGI-uwsgi-uWSGI区别</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#通过对Django的启动研究socket的启动"><span class="toc-text">通过对Django的启动研究socket的启动</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Django梳理与难点剖析"><span class="toc-text">Django梳理与难点剖析</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#django-model"><span class="toc-text">django model</span></a></li></ol></li></ol></div><div class="widget"><div class="widget-title"><i class="fa fa-xie"> 最新文章</i></div><ul class="post-list"><li class="post-list-item"><a class="post-list-link" href="/2018/11/29/DRF-什么是RESTful API/">DRF-什么是RESTful API</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/11/21/爬虫-视频截图/">爬虫-视频截图</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/11/11/DRF-Mixins介绍/">DRF-Mixins介绍</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/11/01/web-前端开发之HTML/">web-前端开发html</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/10/31/python-RabbitMQ 安装、基本示例、轮询机制/">python-RabbitMQ 安装、基本示例、轮询机制</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/10/31/RabbirMQ-win10环境下的安装/">RabbirMQ-win10环境下的安装</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/10/29/python-协程/">python-协程</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/10/29/python-事件驱动和IO介绍/">python-事件驱动和IO介绍</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/10/29/python-入门和基础/">python-入门和基础</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/10/29/工具-ShareX+七牛云实现私有图床/">工具-ShareX+七牛云实现私有图床</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-biao"> 标签</i></div><div class="tagcloud"><a href="/tags/django项目/" style="font-size: 15px;">django项目</a> <a href="/tags/Django/" style="font-size: 15px;">Django</a> <a href="/tags/django/" style="font-size: 15px;">django</a> <a href="/tags/Oauth2-0/" style="font-size: 15px;">Oauth2.0</a> <a href="/tags/RabbitMQ/" style="font-size: 15px;">RabbitMQ</a> <a href="/tags/Docker/" style="font-size: 15px;">Docker</a> <a href="/tags/文本编辑/" style="font-size: 15px;">文本编辑</a> <a href="/tags/python/" style="font-size: 15px;">python</a> <a href="/tags/DRF/" style="font-size: 15px;">DRF</a> <a href="/tags/Mxonline/" style="font-size: 15px;">Mxonline</a> <a href="/tags/web/" style="font-size: 15px;">web</a> <a href="/tags/Markdown/" style="font-size: 15px;">Markdown</a> <a href="/tags/工具/" style="font-size: 15px;">工具</a> <a href="/tags/Linux/" style="font-size: 15px;">Linux</a> <a href="/tags/xadmin/" style="font-size: 15px;">xadmin</a> <a href="/tags/笔记/" style="font-size: 15px;">笔记</a> <a href="/tags/项目部署/" style="font-size: 15px;">项目部署</a></div></div><div class="widget"><div class="widget-title"><i class="fa fa-archive"> 归档</i></div><ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/11/">十一月 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/10/">十月 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/09/">九月 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/08/">八月 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/07/">七月 2018</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-you"> 友情链接</i></div><ul></ul><a href="http://www.tendcode.com/" title="Tendcode" target="_blank">Tendcode</a></div></div></div></div><a id="totop" href="#top"></a><div id="footer"><div class="footer-info"><p><a href="/baidusitemap.xml">Baidu Site Haritası</a> |  <a href="/atom.xml">订阅</a> |  <a href="/about/">关于</a></p><p>本站总访问量：<i id="busuanzi_container_site_pv"><i id="busuanzi_value_site_pv"></i></i>次</p><p><span> Copyright &copy;<a href="/." rel="nofollow">Rearib.</a></span><span> Theme by<a rel="nofollow" target="_blank" href="https://github.com/chaooo/hexo-theme-BlueLake"> BlueLake.</a></span><span> Count by<a href="http://busuanzi.ibruce.info/"> busuanzi.</a></span><span> Powered by<a rel="nofollow" target="_blank" href="https://hexo.io"> Hexo.</a></span></p></div></div></div><script src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js" async></script><script>var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "//hm.baidu.com/hm.js?7c7a5758117d8eb934731041ec33d337";
  var s = document.getElementsByTagName("script")[0];
  s.parentNode.insertBefore(hm, s);
  })();
</script><script type="text/javascript" src="/js/search.json.js?v=2.0.1"></script><script type="text/javascript" src="/js/toctotop.js?v=2.0.1" async></script><script>window._bd_share_config={"common":{"bdSnsKey":{},"bdText":"","bdMini":"2","bdMiniList":["mshare","weixin","tsina","qzone","linkedin","fbook","twi","print","renren","sqq","evernotecn","bdysc","tqq","tqf","bdxc","kaixin001","tieba","douban","bdhome","thx","ibaidu","meilishuo","mogujie","diandian","huaban","duitang","hx","fx","youdao","sdo","qingbiji","people","xinhua","mail","isohu","yaolan","wealink","ty","iguba","h163","copy"],"bdPic":"","bdStyle":"1","bdSize":"16"},"share":{},"image":{"viewList":["tsina","qzone","weixin","fbook","twi","linkedin","youdao","evernotecn","mshare"],"viewText":"分享到：","viewSize":"16"},"selectShare":{"bdContainerClass":null,"bdSelectMiniList":["tsina","qzone","weixin","fbook","twi","linkedin","youdao","evernotecn","mshare"]}};with(document)0[(getElementsByTagName('head')[0]||head).appendChild(createElement('script')).src='http://bdimg.share.baidu.com/static/api/js/share.js?v=89860593.js?cdnversion='+~(-new Date()/36e5)];
</script></body></html>